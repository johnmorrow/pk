<!DOCTYPE html>
<html>
<head>
  <meta http-equiv='content-type' value='text/html;charset=utf8'>
  <meta name='generator' value='Ronn/v0.7.3 (http://github.com/rtomayko/ronn/tree/0.7.3)'>
  <title>pk(1) - a field extraction utility</title>
  <style type='text/css' media='all'>
  /* style: man */
  body#manpage {margin:0}
  .mp {max-width:100ex;padding:0 9ex 1ex 4ex}
  .mp p,.mp pre,.mp ul,.mp ol,.mp dl {margin:0 0 20px 0}
  .mp h2 {margin:10px 0 0 0}
  .mp > p,.mp > pre,.mp > ul,.mp > ol,.mp > dl {margin-left:8ex}
  .mp h3 {margin:0 0 0 4ex}
  .mp dt {margin:0;clear:left}
  .mp dt.flush {float:left;width:8ex}
  .mp dd {margin:0 0 0 9ex}
  .mp h1,.mp h2,.mp h3,.mp h4 {clear:left}
  .mp pre {margin-bottom:20px}
  .mp pre+h2,.mp pre+h3 {margin-top:22px}
  .mp h2+pre,.mp h3+pre {margin-top:5px}
  .mp img {display:block;margin:auto}
  .mp h1.man-title {display:none}
  .mp,.mp code,.mp pre,.mp tt,.mp kbd,.mp samp,.mp h3,.mp h4 {font-family:monospace;font-size:14px;line-height:1.42857142857143}
  .mp h2 {font-size:16px;line-height:1.25}
  .mp h1 {font-size:20px;line-height:2}
  .mp {text-align:justify;background:#fff}
  .mp,.mp code,.mp pre,.mp pre code,.mp tt,.mp kbd,.mp samp {color:#131211}
  .mp h1,.mp h2,.mp h3,.mp h4 {color:#030201}
  .mp u {text-decoration:underline}
  .mp code,.mp strong,.mp b {font-weight:bold;color:#131211}
  .mp em,.mp var {font-style:italic;color:#232221;text-decoration:none}
  .mp a,.mp a:link,.mp a:hover,.mp a code,.mp a pre,.mp a tt,.mp a kbd,.mp a samp {color:#0000ff}
  .mp b.man-ref {font-weight:normal;color:#434241}
  .mp pre {padding:0 4ex}
  .mp pre code {font-weight:normal;color:#434241}
  .mp h2+pre,h3+pre {padding-left:0}
  ol.man-decor,ol.man-decor li {margin:3px 0 10px 0;padding:0;float:left;width:33%;list-style-type:none;text-transform:uppercase;color:#999;letter-spacing:1px}
  ol.man-decor {width:100%}
  ol.man-decor li.tl {text-align:left}
  ol.man-decor li.tc {text-align:center;letter-spacing:4px}
  ol.man-decor li.tr {text-align:right;float:right}
  </style>
</head>
<!--
  The following styles are deprecated and will be removed at some point:
  div#man, div#man ol.man, div#man ol.head, div#man ol.man.

  The .man-page, .man-decor, .man-head, .man-foot, .man-title, and
  .man-navigation should be used instead.
-->
<body id='manpage'>
  <div class='mp' id='man'>

  <div class='man-navigation' style='display:none'>
    <a href="#NAME">NAME</a>
    <a href="#SYNOPSIS">SYNOPSIS</a>
    <a href="#DESCRIPTION">DESCRIPTION</a>
    <a href="#BASICS">BASICS</a>
    <a href="#FIXED-FORMAT-FILES">FIXED FORMAT FILES</a>
    <a href="#TRIMMING">TRIMMING</a>
    <a href="#QUOTING">QUOTING</a>
    <a href="#EXCLUDES">EXCLUDES</a>
    <a href="#ENVIRONMENT">ENVIRONMENT</a>
    <a href="#SEE-ALSO">SEE ALSO</a>
  </div>

  <ol class='man-decor man-head man head'>
    <li class='tl'>pk(1)</li>
    <li class='tc'></li>
    <li class='tr'>pk(1)</li>
  </ol>

  <h2 id="NAME">NAME</h2>
<p class="man-name">
  <code>pk</code> - <span class="man-whatis">a field extraction utility</span>
</p>

<h2 id="SYNOPSIS">SYNOPSIS</h2>

<p><code>pk</code> [<var>OPTIONS</var>] <var>FIELD</var>...<br /></p>

<h2 id="DESCRIPTION">DESCRIPTION</h2>

<p><code>pk</code> prints specified fields from column based input.</p>

<p>OPTIONS</p>

<dl>
<dt><code>-b</code>, <code>--backslash</code></dt><dd><p>This flag is used to allow escaping of delimiters within the input.
If this flag is set then occurances of &lt;var>delimiter within the input
text will not be counted as delimiting two fields.</p></dd>
<dt><code>-d</code>, <code>--delimiters</code>=<var>STRING</var></dt><dd><p>Use  all characters from STRING as field delimiters. The default
delimiter characters are <var>tab</var> and <var>space</var>.</p></dd>
<dt><code>-e</code>, <code>--empty</code></dt><dd><p>Allow empty fields. Some file formats, for example <span class="man-ref">passwd<span class="s">(5)</span></span>, allow
blank fields indicated by adjacent delimiter characters. In normal
operation pk treats adjacent delimiter characters as a single
logical delimiter, this flag reverses that behaviour.</p></dd>
<dt><code>-E</code>, <code>--excludes</code>[=<var>STRINGS</var>]</dt><dd><p>List of strings to exclude from output separated by :</p></dd>
<dt><code>-f</code>, <code>--file</code>=<var>FILE</var></dt><dd><p>Read input from <var>FILE</var> instead of stdin.</p></dd>
<dt><code>-S</code>, <code>--separator</code>=<var>STRING</var></dt><dd><p>The specified STRING is printed between requested fields on stdout.
If this flag is not set then fields are printed separated by a single
<var>space</var>.</p></dd>
<dt><code>-N</code>, <code>--null</code>[=<var>STRING</var>]</dt><dd><p>By default fields that have been directly requested but are empty will
be represented in the output by the string NULL. Using this flag causes
the string <var>STRING</var> to be used instead. Using this flag without an
arguments causes empty fields to be excluded from output without any
indication.</p></dd>
<dt><code>-T</code>, <code>--trim</code></dt><dd><p>Trim non-alphanumerics characters from the beginning and end of each
field before printing.</p></dd>
<dt><code>-?</code>, <code>--help</code></dt><dd><p>Displays a short help message.</p></dd>
<dt class="flush"><code>--usage</code></dt><dd><p>Give a short usage message</p></dd>
<dt><code>-V</code>, <code>--version</code></dt><dd><p>Print program version</p></dd>
</dl>


<h2 id="BASICS">BASICS</h2>

<p>Select and rearrange output from column based commands:</p>

<pre><code>$ df | pk 6 5
Mounted Use%
/ 9%
/dev 1%
/run 1%
/run/lock 0%
/run/shm 0%
</code></pre>

<p>Non-numeric fields are outputted directly:</p>

<pre><code>$ ls -l /etc | pk 9 is owned by 3
adduser.conf is owned by root
alternatives/ is owned by root
apparmor/ is owned by root
</code></pre>

<p>Ranges are also supported:</p>

<pre><code>$ echo A B C D | pk 2-3
B C
$ echo A B C D | pk 2-
B C D
$ echo A B C D | pk -- -3  # careful, looks like a flag
A B C
$ echo A B C D | pk -
A B C D
</code></pre>

<p>Change the output separator to create new file formats:</p>

<pre><code>$ ps aux | pk -S, 1 2 | head
USER,PID
root,1
root,2
root,3
</code></pre>

<h2 id="FIXED-FORMAT-FILES">FIXED FORMAT FILES</h2>

<p>Fixed formats, such as <em>/etc/passwd</em>, can have different delimiters and
possibly contain empty fields:</p>

<pre><code>$ cat /etc/passwd | pk -e -d: 1 7
root /bin/bash
daemon /bin/sh
bin /bin/sh
sys /bin/sh
</code></pre>

<h2 id="TRIMMING">TRIMMING</h2>

<p>The <em>-T</em> flags trims non-alphanumeric characters from the left and right side
before printing the field to stdout. This is useful removing quotes,
parentheses or other visual delineations.</p>

<pre><code>$ echo "'Example User' &lt;foobar@example.com&gt;" | pk -T 3
foobar@example.com
</code></pre>

<h2 id="QUOTING">QUOTING</h2>

<p>Quoting is supported. Double quote is the default quote character:</p>

<pre><code>$ cat input
"Bilbo Baggins", "The Hobbit"
"Frodo Baggins", "The Lord of the Rings"
$ pk -f input -d", " -q 2
"The Hobbit"
"The Lord of the Rings"
</code></pre>

<p>The quote character can be specified.</p>

<pre><code>$ cat input
'Bilbo Baggins', 'The Hobbit'
'Frodo Baggins', 'The Lord of the Rings'
$ pk -f input -d", " -q"'" 1
'Bilbo Baggins'
'Frodo Baggins'
</code></pre>

<p>A two character argument supplied to the quote flag are used as start and end:</p>

<pre><code>$ cat input
(Bilbo Baggins) (The Hobbit)
(Frodo Baggins) (The Lord of the Rings)
$ pk -f input -q"()" 1
(Bilbo Baggins)
(Frodo Baggins)
$ pk -f input -q"()" -T 1
Bilbo Baggins
Frodo Baggins
</code></pre>

<h2 id="EXCLUDES">EXCLUDES</h2>

<p>A list of strings that will always be excluded from the output can be supplied
to pk via the <em>-E</em> flag. An example use case for this is when dealing with
lists of servers you may want to automatically strip fully qualified hostnames
down to their local names before passing on to another process in the pipeline.</p>

<pre><code>$ cat input
foo.example.com 192.168.1.1 active
bar.example.com 192.168.1.2 repair
baz.example.net 192.168.1.3 active
$ cat input | pk -E.example.com:.example.net 1 3
foo active
bar repair
baz active
</code></pre>

<p>Alternatively, as this is likely to be a regular request, it can be set using an
environment variable. When using the environment variable the <em>-E</em> flag without
arguments can be used to ignore the setting. The <em>-E</em> flag used with arguments
will override the environment variable.</p>

<pre><code>$ export PK_EXCLUDES=.example.com:.example.net
$ cat input | pk 1 3
foo active
bar repair
baz active
$ cat input | pk -E 1 3
foo.example.com active
bar.example.com repair
baz.example.net active
</code></pre>

<h2 id="ENVIRONMENT">ENVIRONMENT</h2>

<dl>
<dt><code>PK_EXCLUDES</code></dt><dd>This is a : separated list of strings to be removed from fields
before printing. Overridden by the -E option.</dd>
</dl>


<h2 id="SEE-ALSO">SEE ALSO</h2>

<p><span class="man-ref">awk<span class="s">(1)</span></span>, <span class="man-ref">cut<span class="s">(1)</span></span></p>


  <ol class='man-decor man-foot man foot'>
    <li class='tl'></li>
    <li class='tc'>January 2013</li>
    <li class='tr'>pk(1)</li>
  </ol>

  </div>
</body>
</html>
